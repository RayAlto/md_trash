# 论文翻译

原文：[Distributed Computing with RESTful Web Services | IEEE Conference
Publication | IEEE Xplore](https://ieeexplore.ieee.org/document/6362956)

发布于：2012 年第七届 P2P 、并行、网格、云和互联网计算国际会议

DOI: `10.1109/3PGCIC.2012.30`

作者：

- Frederik Orellana（弗雷德里克 · 奥雷利亚纳，丹麦-哥本哈根-哥本哈根大学）
- Marko Niinimaki（马尔科 · 尼尼马基，日内瓦-西瑞士应用科技大学-HEPIA）

---

## Title

基于 RESTful 网络服务的分布式计算

## Abstract

在金融和科学领域，例如基因序列比对搜索、数据挖掘、图形渲染和蒙特卡罗模拟等高性能应用程序给计算机基础设施带来了越来越大的负担。以前，这种令人愉快的并行工作负载要通过标准的批处理调度来并行化，或者放大来看，基于 web 服务的网格中间件，传统上依赖 SOAP 网络服务。有人认为， RESTful 网络服务为这种异步分布式计算提供了一个天然的框架，并容许一个更适合按需计算的体系结构。具体地描述了网格工厂/分布式计算系统的服务。这些服务以 Apache 模块的形式实现，利用 Apache api 进行访问控制和数据库通信。此外，标准 Apache 模块 mod_dav 和 mod_ssl 用于文件服务、身份验证和加密。描述了系统的特点，并对直接使用 Apache 作为托管平台的性能进行了评估。该系统已经过初步测试，证明了该方法的可行性。

> - [RESTful](https://en.wikipedia.org/wiki/Representational_state_transfer): Representational State Transfer，表现层状种万维网软件架构风格，目的是便于在不同软件/程序在网络（例如互联网）中互相传递信息。
> - [SOAP](https://en.wikipedia.org/wiki/SOAP): Simple Object Access Protocol，简单对象访问协议，一种交换数据的协议规范。
> - [Apache](https://en.wikipedia.org/wiki/Apache_HTTP_Server): Apache 基金会，这里特指 Apache HTTP Server，是 Apache 软件基金会中的一个开源网页服务器。

## Sec 1. 介绍及基本理论

GridFactory 是一个在局域网或广域网上聚合计算资源的系统，用于进行重负荷的批量计算。这种系统的目的是完成独立的、运行时间相对较长的作业，在某种程度上介于桌面网格（参考[1-3]）、传统的批处理系统和网格之间。它实现了一个分层的拉式架构，在链的末端有服务器从其他服务器中拉出计算作业，称为工作者节点，从一个或多个服务器中拉出作业。系统的体系结构以及其实际用例的许多应用程序在[4]、[5]和 GridFactory 网站中都有文档说明。本文描述了该系统的网络服务。

建立这个系统的一个重要动机是公共云服务越来越受欢迎、规模越来越大，以及它们典型的使用模式: 由于在短时间内租用大量的机器和在较大的时间内租用同比例较少的机器所需要的费用是相同的，因此没有金钱上的理由不去用尽可能多的机器在尽可能短的时间内完成给定的一组任务。因此，在这样的环境中，批处理运行通常是在很多机器上完成的，它们的调度需要由一个快速且安全的系统来提供，而这个系统不一定要有很多调度特性，因为在一组同类机器上通常只有一个用户和一系列同类的任务。因此，对于优化最大完工时间和（或）流程时间的问题（例如[6]），往往采用先进先出的调度方式就可以得到解决。尽管如此，GridFactory 确实有一些简单的公平共享和非饥饿调度特性，如“性能评估”部分中所讨论的。另一个动机是大多数机构和企业进行大规模计算的可用计算资源的规模和多样性不断增加。这个想法是为了匹配桌面网格系统的可伸缩性、容错性和可部署性，允许在大规模上包含异构的、不可信的和易变的系统。所以，指导服务本身设计的一个原则是，这些服务应该是“傻”的——而客户端应该是智能的，因为执行简单任务的傻服务器更可能顺利地执行任务，出现错误的可能性更小，从而提高正常运行时间。此外，服务器会处于所有客户机（工作节点和作业提交者）的负载下，因此服务器上的 CPU 周期是一种宝贵的资源，最好不要将其花费在复杂的服务上。另一方面，对于空闲的客户机来说，CPU 周期这种资源将非常充足。这种考虑会导致有意识地避免在服务器上使用标准网络服务容器和 PHP 或 Perl 等高级语言。与此相反，每个 GridFactory 网络服务都是一个 Apache 模块[7]。

选择 Apache 模块，而不是从头开始编写多线程网络服务器的一个原因是后者是一项艰巨的任务。危险包括内存泄漏、安全漏洞（缓冲区溢出等）、性能和扩展等问题。通过“只”编写 Apache 模块，我们让 Apache HTTPD 完成了繁重的工作，并借助了 Apache api 提供的基础设施。最终的结果是需要维护的代码相对较少（约 4000 行 C 语言代码），提供系统特有的功能，而大多数从性能和安全角度来看至关重要的代码—— Apache HTTPD 和核心模块由全球开源社区开发者维护。

因为服务本身就很简单，所以不需要在网络上传递复杂的对象，因此也不需要进行传统的用于网格计算环境的 SOAP [8]信息交换。相反，我们发现使用简单的文本或 XML 对象的 HTTP PUT 和 GET 就足够了。这样，一个标准的网页浏览器，可以用来查询服务，同时人类也可以读懂查询的结果。

关于可部署性: 部署一个完整的 GridFactory 系统，既不需要重新配置防火墙（除了放行网络服务器的入站连接），也不需要设置共享用户帐户或网络文件系统。防火墙友好性是由于已经提到的拉式架构：与服务器的通信通常由客户机（工作节点或作业提交者）发起。这对调度有明显的影响，这部分将在“性能评估”一节中进行分析。

下面一节包含了相关工作的描述，然后是系统的网络服务的说明、在使用系统时这些服务如何发挥作用的描述（包括一个简单的例子），对体系结构的一些显著特征的讨论，最后是结论和展望。

> - [GridFactory](https://web.archive.org/web/20130131114502/http://www.gridfactory.org/ "Web Archive 快照，原域名已无法解析"): 是一个在局域网和广域网上集成计算资源以进行大规模计算的研究项目，通过虚拟化、集成软件目录和使用基于 x.509 的虚拟组织， GridFactory 旨在使加入、创建和使用分布式计算云变得简单。但是上面所说的网站的域名现在已经不能被解析了， Web Archive 上最后一次记录在 2013 年 1 月 31 日。
> - [CPU](https://en.wikipedia.org/wiki/Central_processing_unit): 中央处理器
> - [PHP](https://en.wikipedia.org/wiki/PHP): 一种脚本语言，一般嵌入 HTML 中用于网络开发
> - [Perl](https://en.wikipedia.org/wiki/Perl): 一种解释型、动态脚本语言。
> - [C 语言](https://en.wikipedia.org/wiki/C_%28programming_language%29): 一种通用编程语言，广泛用于系统、软件开发。
> - [Apache HTTPD](https://en.wikipedia.org/wiki/Apache_HTTP_Server): Apache 软件基金会的一个开源网页服务器。

## Sec 2. 相关研究

在像 Amazon EC2 这样的公共云上，部署标准的批处理调度系统是理所当然的，比如 PBS [9]、 GridEngine [10]和 Slurm [11]。这些系统采用推式架构，因此服务器需要事先知道节点的 IP 地址。这使得动态扩展需要依赖额外的服务和软件，变得极其困难，比如 StarCluster [12]、[13]、 CycleCloud 和 UniCloud。

在使用推式架构的动态设置中，一个特定的问题是需要让节点上的防火墙放行从服务器的 IP 地址入站的连接。最后变成了静态设置，因为这样为服务器提供了一个固定的 IP 地址。我们喜欢更动态的设置，使整个系统可以按需启动，比如说，启动一个服务器映像和任意数量的工作节点映像，它们仅需要知道服务器的 DNS 名称。尽管如此，从可用性或可部署性的角度来看，这个方法确实有一个小小的复杂性: GridFactory 需要服务器上与其 DNS 名称或 IP 地址匹配的 SSL 证书，但我们发现，使用像 DynDNS 这样的动态 DNS 服务会使这个复杂性变得可以接受——证书可以在每此部署时生成一次然后重复使用。

在动态云或桌面环境中，传统的批处理调度系统的另一个问题是，它们需要共享网络文件系统。一般使用 NFS 文件系统，但这导致了另一组复杂的问题和防火墙和安全隐患（需要运行更多的服务、需要在节点上打开更多的端口、数据流量没有加密），此外，由于负载很高，它并不能很好地扩展到数百个节点。因此，配置一个大型集群需要配置一个复杂的共享文件系统，要么通过多个 NFS 服务器，要么通过 GPFS 或 Lustre 等“高端的”网络文件系统，根据我们的判断，根据需要提供这些文件系统是不现实的。

以上提到的以及其他复杂的情况（比如对于无密码的 SSH 登录的需求）在某种程度上（至少在云环境中）都可以通过对节点和服务器映像进行充分的定制来解决，但总的来说，这种定制违背了我们的可部署性和安全性的目标。

正如前面提到的，GndFactory 与 BOINC 等桌面网格系统有几个共同的特点: 它允许在整个互联网范围内部署工作节点、内置了对工作节点故障的容忍、采用了拉式结构、工作节点非常容易部署。不幸的是，准备和提交作业并不那么简单，GridFactory 和 BOINC 之间的一个主要区别是，GridFactory 是一个通用的批处理系统，设置用户界面软件和提交作业并不比运行一个工作节点复杂。此外，GridFactory 实现了一个分层的拉式架构（即服务器可以从其他服务器拉取作业），并允许双向 SSL 身份验证和强加密。

名实相符，GridFactory 与 Globus [14]、 NorduGrid/ARC [15]和 gLite [16]等传统网格系统有许多共同特征。它们的两个主要区别是: 1）这些系统都使用所谓的 VOMS 代理证书[17]进行身份验证和授权，而 GridFactory 通过组成员[18]委托访问权限。2）这些系统是建立在批处理调度系统之上的，而 GridFactory 是一个批处理调度系统——具有广域网功能。3）采用拉式架构。与传统的网格软件栈相比，所有这些选择都意味着重大的架构简化。特别地，即使 GridFactory 可以部署在一个多站点的层次结构中，也可以避免复杂的集中调度[19]计算。从作业提交和调度的角度来看，多站点、分层的 GridFactory 部署在精神上类似于 GridWay [20]、[21]和 ARC，因为用户可以选择在哪里运行作业，并希望在层次结构中靠近自己运行作业。另一方面，他也可以选择通过提交到层次结构更高的服务器上实现的更集中的多站点调度，以及通过提交到顶级服务器上实现更常见的完全集中的调度[22]，[23]。

一个在精神上类似于 GridFactory 的系统是 Condor [24]。可用性观点的主要区别在于部署和安全模型。Condor 支持在服务器和工作节点上运行的多个网络守护进程，并且拥有一个复杂的安全基础设施和许多选项，包括很多可能用到的身份验证方法（SSL、Kerberos、密码、……)，而 GridFactory 只支持 SSL ，而且由于服务器上唯一的网络守护进程是 Apache HTTPD，因此配置要简单得多。从技术角度来看，Condor 是一个老项目，所有组件都从头开始编写，并使用自己的协议进行信息交换。这个说法并没有任何消极的意义，因为 Condor 已经不断发展了很多年，它的性能已经被很好地证明了。相比之下，GridFactory 是一个全新的、相对来说缺少验证的尝试，它利用现代的、开源的、标准的网络技术构建一个分布式计算系统。

XtremWeb [25]和它的 p2p-sibling，XtremWeb-ch [26]是一个更像 GridFactory 的系统。这些系统实现了一个拉式架构，工作节点守护进程与 GridFactory 中的守护进程一样，是用 Java 实现的。与 GridFactory 不同，它们使用非标准的通信协议，不允许分层部署。

DIRAC [27]系统和 AliEN [28]系统都是欧洲核子研究中心开发的，而且都是基于拉式架构的，它们可能是最类似于 GridFactory 的两个系统。用[27]的术语来说它们架构上的主要差异在于 GridFactory 是一个基于拉式架构的全局计算系统，而 DIRAC 和 AliEN 都是混合网格（全局）计算系统，在本地“推式”调度系统之上提供了一个“拉式”作业分配层。此外，这些系统都与上述传统网格系统集成。这两种差异在复杂性和可部署性方面都有影响。

另一个分布式计算系统是非常流行的 Hadoop [29]。Hadoop 并不是一个通用的批处理调度系统，而是一组库，实现 MapReduce [30]编程模型。它类似于 GridFactory，在这个意义上，数据分布是半自动处理的，数据是在有物理上可用的（数据局部性）数据的节点上处理的，但与 GridFactory 相比，Hadoop 本质上是一个局域系统，网络安全性很低，数据分布基于分散式文件系统。此外，在合并和减少作业输出方面，Hadoop 具有 GridFactory 所缺少的智能。然而，为了利用这一点，作业和应用程序必须使用提供的 JAVA API 专门制作。有了 Hadoop 流实用工具，就可以像使用“傻”批处理系统一样使用 Hadoop 来处理独立的作业，但是对作业进行精雕细琢并非易事，甚至具有挑战性，尤其是在处理二进制数据[31]时。虽然还有其他一些 MapReduce 实现在一定程度上解决了这个问题，但是没有一个能达到 Hadoop 的普遍性。

> - [Amazon EC2](https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud): 亚马逊弹性云计算，是亚马逊公司提供的一个网络服务，允许用户租用云端电脑运行所需的应用。> - [Amazon EC2](https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud): 亚马逊弹性云计算，是亚马逊公司提供的一个网络服务，允许用户租用云端电脑运行所需的应用。
> - PBS,GridEngine,Slurm,StarCluster,CycleCloud,UniCloud: 一些计算机集群软件。
> - [Condor](https://en.wikipedia.org/wiki/HTCondor): HTCondor，是一个开源的高吞吐量计算软件框架，用于计算密集型任务的粗粒度分布式并行化。
> - [JAVA](https://en.wikipedia.org/wiki/Java_%28programming_language%29): 一种编程语言。
> - [Hadoop](https://en.wikipedia.org/wiki/Apache_Hadoop): Apache 基金会的一个支持数据密集型分布式应用程序的开源软件框架。
> - [MapReduce](https://en.wikipedia.org/wiki/MapReduce): Google 提出的一个软件架构，用于大规模数据集的并行运算。

## Sec 3. 网络服务概述
