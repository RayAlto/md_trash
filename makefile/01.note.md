# Makefile 学习笔记 01

## HelloWorld

Makefile 不能用空格缩进，只能用 Tab ，但这里因为是 Markdown 写的，所以用空格：

```makefile
hello:
    echo 'hello world!'
```

像这样， makefile 由很多这样的部分组成：

```makefile
target: prerequisite
    command
    command
    command
```

1. `target`: 顾名思义“目标”，也就是这一块最后能产生什么，比如说编译 `test.cc` 生成 `test.o` ， target 就可以写 `test.o`
1. `prerequisite`: 顾名思义“先决条件”，也就是这一块运行的条件是什么，比如上面生成 `test.o` 需要 `test.cc` ， prerequisite 就可以写 `test.cc`
1. `command`: 顾名思义“命令”，也就是这一块要执行什么指令，比如上面生成 `test.o` 需要 `gcc -c test.cc -o test.o`

完整写出来就是：

```makefile
# 链接成 test
test: test.o
    @c++ test.o -o test

# 编译成 test.o
test.o: test.cc
    @c++ -c test.cc -o test.o

# 先写一个 hello world
test.cc:
    @printf "#include <iostream>\n\
    int main(int argc, char const *argv[]) {\n\
        std::cout << \"hello world\" << std::endl;\n\
    }" > test.cc
```

如果重复 `make` 的话 `make` 会提示 `is up to date`
