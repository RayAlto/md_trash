# 更多常见的组件

继[上篇](./02.一些常见的组件.md)

## 对话框（ `Gtk::Dialog` ）

直接继承自 `Gtk::Window` ，有很多种不同预设对话框，如果想要添加更多组件可以 `get_content_area()` 获得 `Gtk::Dialog` 的 `Gtk::Box` ；如果只需要在底部放一个 `Gtk::Button` 的话可以直接 `add_button()`

### 消息对话框（ `Gtk::MessageDialog` ）

就是展示消息的对话框：

```c++
Gtk::MessageDialog(
    /* parent window */ *this,
    /* title         */ "message",
    /* use_markup    */ false,
    /* message type  */ Gtk::MessageType::QUESTION,
    /* button type   */ Gtk::ButtonType::OK_CANCEL,
    /* modal         */ false
)
```

具体的信息还可以 `Gtk::MessageDialog::set_secondary_text()` 设置，还有 `Gtk::MessageDialog::set_hide_on_close()` 可以提供更像对话框的交互逻辑。当用户点了带有逻辑的按钮后会触发 `signal_response()` ，有一个 `int response_id` 参数，可以通过 `enum Gtk::ResponseType::XXX` 来 `switch`。

![消息对话框](../imgs/gtkmm4-message_dialog.gif "消息对话框")

### 文件选择对话框（ `Gtk::FileChooserDialog` ）

都差不多：

```c++
Gtk::FileChooserDialog(
    /* parent window  */ *this,
    /* title          */ "Open",
    /* action         */ Gtk::FileChooserDialog::Action::OPEN,
    /* use header bar */ false
)
```

> 这里第四个参数最好填 `false` 如果填 `true` 会导致按钮不显示

可以加一些 `filter` 来限制选择文件的类型：

```c++
Glib::RefPtr<Gtk::FileFilter> filter = Gtk::FileFilter::create()
filter->set_name("C Source File")
filter->add_suffix("c");
filter->add_mime_type("text/x-c"); // 这个好像不怎么准
file_chooser_dialog->add_filter(filter);
```

![文件选择对话框](../imgs/gtkmm4-file_chooser_dialog.gif "文件选择对话框")

### 颜色选择对话框（ `Gtk::ColorChooserDialog` ）

选颜色的，默认有两个按钮 `Select` 和 `Cancel` ，一般不用再加按钮了。通过 `Gtk::ColorChooserDialog::get_rgba()` 可以获取用户选择的颜色（如果用户没有选择的话这个方法可能没有意义，最好放在 `signal_response()` 的回调里：

![颜色选择对话框](../imgs/gtkmm4-color_chooser_dialog.gif "颜色选择对话框")

### 字体选择对话框（ `Gtk::FontChooserDialog` ）

选字体的，也默认有两个按钮 `Select` 和 `Cancel` ，通过 `Gtk::FontChooserDialog::get_font()` 可以获取用户选择的字体的 pango font description 字符串

![字体选择对话框](../imgs/gtkmm4-font_chooser_dialog.gif "字体选择对话框")

### 关于对话框（ `Gtk::AboutDialog` ）

好多 GNOME 应用都有这个东西，可以设置很多东西：

```c++
about_dialog_.set_transient_for(*this);
about_dialog_.set_modal();
about_dialog_.set_hide_on_close();
about_dialog_.set_logo(Gdk::Texture::create_from_filename(
    "my-awesome-logo.png"));
about_dialog_.set_program_name("1919 Application");
about_dialog_.set_version("114.514");
about_dialog_.set_copyright("Ray Alto");
about_dialog_.set_comments("你是一个一个一个");
about_dialog_.set_license("WTFL");
about_dialog_.set_website("https://www.rayalto.top");
about_dialog_.set_website_label("Ray Alto's Blog");
about_dialog_.set_authors({"Ray Alto", "Anonymous", "Ace Taffy"});
/* about_dialog_.set_titlebar(*Gtk::make_managed<Gtk::HeaderBar>()); */
```

> 注意这里把 `set_titlebar` 注释掉了，因为 `Gtk::AboutDialog` 有一个自己的 title bar ，再设置一个 title bar 会覆盖掉原生的 title bar

![关于对话框](../imgs/gtkmm4-about_dialog.gif "关于对话框")
